{% assign pubs_sorted = site.data.publications | sort: "issued.date-parts[0][0]" | reverse %}
{% assign seen_dois = "" | split: "" %}

<ul class="list-unstyled">
  {% for publi in pubs_sorted %}
    {% assign doi_key = publi.DOI | default: "" | strip | downcase %}

    {% if doi_key != "" %}
      {% unless seen_dois contains doi_key %}
        {% assign seen_dois = seen_dois | push: doi_key %}
        {% assign year = publi.issued["date-parts"][0][0] | default: "n.d." %}

        <li class="media mb-1">
          <div class="media-body">
            <p>
              <strong>{{ publi.title }}</strong><br>

              {% assign authors = publi.author %}
              {% if authors.size > 3 %}
                {% for a in authors limit:3 %}
                  {{ a.family }}, {{ a.given }}{% unless forloop.last %}; {% endunless %}
                {% endfor %} <i>et al.</i>,
              {% else %}
                {% for a in authors %}
                  {{ a.family }}, {{ a.given }}{% unless forloop.last %}; {% endunless %}
                {% endfor %},
              {% endif %}

              {{ year }},

              {% if publi['container-title'] %}
                <span class="font-italic">{{ publi['container-title'] }}</span>
              {% elsif publi.URL contains "biorxiv" %}
                <span class="font-italic">bioRxiv</span>
              {% endif %}

              <br><a href="https://doi.org/{{ publi.DOI }}" style="color: #006B6A;">DOI: {{ publi.DOI }}</a>
            </p>
          </div>
        </li>
      {% endunless %}
    {% endif %}
  {% endfor %}
</ul>
